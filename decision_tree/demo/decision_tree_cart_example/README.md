# CARTå†³ç­–æ ‘ (Decision Tree CART) ä½¿ç”¨æŒ‡å—

## ğŸ“– ç®€ä»‹

CARTï¼ˆClassification and Regression Treesï¼‰æ˜¯ä¸€ç§æ—¢å¯ä»¥ç”¨äºåˆ†ç±»ä¹Ÿå¯ä»¥ç”¨äºå›å½’çš„å†³ç­–æ ‘ç®—æ³•ã€‚å®ƒç”ŸæˆäºŒå‰æ ‘ï¼Œä½¿ç”¨åŸºå°¼ç³»æ•°ï¼ˆåˆ†ç±»ï¼‰æˆ–æ–¹å·®ï¼ˆå›å½’ï¼‰ä½œä¸ºåˆ†è£‚å‡†åˆ™ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### è¿è¡Œç¤ºä¾‹
```bash
python main.py
```

## ğŸ“ è¾“å‡ºæ–‡ä»¶å¤¹

è¿è¡Œç¨‹åºåï¼Œæ‰€æœ‰ç”Ÿæˆçš„å›¾ç‰‡å’ŒæŠ¥å‘Šå°†ä¿å­˜åœ¨ï¼š
```
./output/
```

### ç”Ÿæˆçš„æ–‡ä»¶åŒ…æ‹¬ï¼š

#### ğŸ“Š å¯è§†åŒ–å›¾ç‰‡ (18å¼ )

**åˆ†ç±»æ¨¡å¼:**
- `01_classification_simple.png` - ç®€å•åˆ†ç±»æ•°æ®é›†ç»“æœ
- `01_classification_simple_boundary.png` - ç®€å•åˆ†ç±»æ•°æ®é›†å†³ç­–è¾¹ç•Œ
- `02_classification_train.png` - sklearnåˆ†ç±»è®­ç»ƒç»“æœ
- `02_classification_test.png` - sklearnåˆ†ç±»æµ‹è¯•ç»“æœ
- `02_classification_boundary.png` - sklearnåˆ†ç±»å†³ç­–è¾¹ç•Œ
- `03_iris_train.png` - é¸¢å°¾èŠ±è®­ç»ƒç»“æœ
- `03_iris_test.png` - é¸¢å°¾èŠ±æµ‹è¯•ç»“æœ
- `03_iris_boundary.png` - é¸¢å°¾èŠ±å†³ç­–è¾¹ç•Œ

**å›å½’æ¨¡å¼:**
- `04_regression_simple.png` - ç®€å•å›å½’æ•°æ®é›†ç»“æœ
- `05_regression_train.png` - sklearnå›å½’è®­ç»ƒç»“æœ
- `05_regression_test.png` - sklearnå›å½’æµ‹è¯•ç»“æœ

**å‰ªæå¯¹æ¯”:**
- `06_cart_unpruned.png` - å‰ªæå‰ç»“æœ
- `06_cart_pruned.png` - å‰ªæåç»“æœ
- `06_cart_unpruned_boundary.png` - å‰ªæå‰å†³ç­–è¾¹ç•Œ
- `06_cart_pruned_boundary.png` - å‰ªæåå†³ç­–è¾¹ç•Œ

#### ğŸ“„ æŠ¥å‘Šæ–‡ä»¶
- `summary_report.txt` - è¯¦ç»†çš„å®éªŒæŠ¥å‘Šå’Œç®—æ³•è¯´æ˜

## ğŸ“Š æ•°æ®é›†è¦æ±‚

1. **ç‰¹å¾çŸ©é˜µ X**: å½¢çŠ¶ä¸º `(n_samples, n_features)` çš„æ•°ç»„
2. **æ ‡ç­¾å‘é‡ y**: 
   - åˆ†ç±»ï¼šç¦»æ•£æ ‡ç­¾å€¼
   - å›å½’ï¼šè¿ç»­ç›®æ ‡å€¼
3. **ç‰¹å¾ç±»å‹**: æ”¯æŒè¿ç»­å’Œç¦»æ•£ç‰¹å¾
4. **æ ‘ç»“æ„**: ç”ŸæˆäºŒå‰å†³ç­–æ ‘
5. **åŒæ¨¡å¼**: æ”¯æŒåˆ†ç±»å’Œå›å½’ä¸¤ç§æ¨¡å¼

## ğŸ”§ åŸºæœ¬ç”¨æ³•

### åˆ†ç±»æ¨¡å¼
```python
from decision_tree_cart import CART
import numpy as np

# åˆ›å»ºåˆ†ç±»æ•°æ®
X = np.array([[1.2, 2.3], [2.1, 3.4], [3.5, 1.8], [4.2, 2.9]])
y = np.array([0, 1, 1, 0])

# è®­ç»ƒåˆ†ç±»æ¨¡å‹
cart_clf = CART(mode='classification')
cart_clf.fit(X, y)

# é¢„æµ‹
predictions = cart_clf.predict(X)
print(predictions)

# å‰ªæ
cart_clf.prune_ccp(X, y)
```

### å›å½’æ¨¡å¼
```python
# åˆ›å»ºå›å½’æ•°æ®
X = np.array([[1.0, 2.0], [2.0, 3.0], [3.0, 1.0], [4.0, 2.0]])
y = np.array([1.5, 2.8, 2.1, 3.2])

# è®­ç»ƒå›å½’æ¨¡å‹
cart_reg = CART(mode='regression')
cart_reg.fit(X, y)

# é¢„æµ‹
predictions = cart_reg.predict(X)
print(predictions)
```

## ğŸ¯ æ¨èæ•°æ®é›†

### 1. åˆ†ç±»æ•°æ®é›†
```python
from sklearn.datasets import make_classification, load_iris, load_wine

# ç”Ÿæˆåˆ†ç±»æ•°æ®
X, y = make_classification(n_samples=300, n_features=2, n_classes=3)

# é¸¢å°¾èŠ±æ•°æ®é›†
data = load_iris()
X, y = data.data, data.target

# è‘¡è„é…’æ•°æ®é›†
data = load_wine()
X, y = data.data, data.target
```

### 2. å›å½’æ•°æ®é›†
```python
from sklearn.datasets import make_regression, load_diabetes, fetch_california_housing

# ç”Ÿæˆå›å½’æ•°æ®
X, y = make_regression(n_samples=200, n_features=2, noise=0.1)

# åŠ å·æˆ¿ä»·æ•°æ®é›†ï¼ˆæ¨èæ›¿ä»£Bostonæ•°æ®é›†ï¼‰
housing = fetch_california_housing()
X, y = housing.data, housing.target

# ç³–å°¿ç—…æ•°æ®é›†
data = load_diabetes()
X, y = data.data, data.target
```

## âš™ï¸ ç®—æ³•ç‰¹ç‚¹

- âœ… **åŒæ¨¡å¼**: åŒæ—¶æ”¯æŒåˆ†ç±»å’Œå›å½’
- âœ… **äºŒå‰æ ‘**: ç”ŸæˆäºŒè¿›åˆ¶åˆ†è£‚çš„å†³ç­–æ ‘
- âœ… **åˆ†è£‚å‡†åˆ™**: åŸºå°¼ç³»æ•°ï¼ˆåˆ†ç±»ï¼‰æˆ–æ–¹å·®ï¼ˆå›å½’ï¼‰
- âœ… **è¿ç»­ç‰¹å¾**: è‡ªåŠ¨å¤„ç†è¿ç»­å’Œç¦»æ•£ç‰¹å¾
- âœ… **CCPå‰ªæ**: å†…ç½®æˆæœ¬å¤æ‚åº¦å‰ªæ
- âœ… **é«˜æ•ˆ**: äºŒå‰æ ‘ç»“æ„æ›´ç®€æ´é«˜æ•ˆ

## ğŸ” è¾“å‡ºè§£é‡Š

### åˆ†ç±»æ¨¡å¼
- **å‡†ç¡®ç‡**: åˆ†ç±»çš„æ­£ç¡®ç‡
- **æ ‘çš„èŠ‚ç‚¹æ•°**: å†³ç­–æ ‘çš„æ€»èŠ‚ç‚¹æ•°
- **æ ‘çš„æ·±åº¦**: å†³ç­–æ ‘çš„æœ€å¤§æ·±åº¦

### å›å½’æ¨¡å¼
- **MSE**: å‡æ–¹è¯¯å·®
- **RÂ²åˆ†æ•°**: å†³å®šç³»æ•°ï¼Œè¡¡é‡æ¨¡å‹æ‹Ÿåˆç¨‹åº¦
- **æ ‘çš„ç»“æ„**: èŠ‚ç‚¹æ•°å’Œæ·±åº¦ä¿¡æ¯

## ğŸ“ˆ æ€§èƒ½åˆ†æ

### åˆ†ç±»æ€§èƒ½
1. **ç®€å•æ•°æ®é›†**: å‡†ç¡®ç‡é€šå¸¸åœ¨80-95%ä¹‹é—´
2. **çœŸå®æ•°æ®é›†**: åœ¨æ ‡å‡†æ•°æ®é›†ä¸Šè¡¨ç°ç¨³å®š
3. **å‰ªææ•ˆæœ**: CCPå‰ªææœ‰æ•ˆæé«˜æ³›åŒ–èƒ½åŠ›

### å›å½’æ€§èƒ½
1. **MSE**: å‡æ–¹è¯¯å·®è¶Šå°è¶Šå¥½
2. **RÂ²åˆ†æ•°**: æ¥è¿‘1è¡¨ç¤ºæ‹Ÿåˆæ•ˆæœå¥½
3. **è¿‡æ‹Ÿåˆ**: å‰ªæå¯ä»¥å‡å°‘è¿‡æ‹Ÿåˆç°è±¡

## ğŸ“ æ³¨æ„äº‹é¡¹

1. é€‰æ‹©æ­£ç¡®çš„æ¨¡å¼ï¼ˆ'classification' æˆ– 'regression'ï¼‰
2. åˆ†ç±»æ ‡ç­¾å»ºè®®ä»0å¼€å§‹çš„è¿ç»­æ•´æ•°
3. å›å½’ç›®æ ‡å€¼åº”ä¸ºè¿ç»­æ•°å€¼
4. CCPå‰ªæéœ€è¦æä¾›è®­ç»ƒæ•°æ®
5. æ‰€æœ‰è¾“å‡ºæ–‡ä»¶ä¿å­˜åœ¨ `./output/` æ–‡ä»¶å¤¹ä¸­

## ğŸ”„ ä¸å…¶ä»–ç®—æ³•å¯¹æ¯”

| ç‰¹æ€§ | ID3 | C4.5 | CART |
|------|-----|------|------|
| åˆ†è£‚å‡†åˆ™ | ä¿¡æ¯å¢ç›Š | ä¿¡æ¯å¢ç›Šæ¯” | åŸºå°¼ç³»æ•°/æ–¹å·® |
| ç‰¹å¾ç±»å‹ | ä»…ç¦»æ•£ | è¿ç»­+ç¦»æ•£ | è¿ç»­+ç¦»æ•£ |
| æ ‘ç»“æ„ | å¤šå‰ | å¤šå‰ | äºŒå‰ |
| å‰ªæ | æ—  | PEPå‰ªæ | CCPå‰ªæ |
| åº”ç”¨ | åˆ†ç±» | åˆ†ç±» | åˆ†ç±»+å›å½’ |
| ä¼˜åŠ¿ | ç®€å•å¿«é€Ÿ | å¤„ç†è¿ç»­ç‰¹å¾ | åŒæ¨¡å¼ï¼ŒäºŒå‰æ ‘ |

## ğŸ“š ç†è®ºèƒŒæ™¯

### åŸºå°¼ç³»æ•°
å¯¹äºåˆ†ç±»é—®é¢˜ï¼ŒCARTä½¿ç”¨åŸºå°¼ç³»æ•°è¡¡é‡ä¸çº¯åº¦ï¼š
```
Gini(D) = 1 - Î£(piÂ²)
```
å…¶ä¸­piæ˜¯ç±»åˆ«iåœ¨æ•°æ®é›†Dä¸­çš„æ¯”ä¾‹ã€‚

### æ–¹å·®
å¯¹äºå›å½’é—®é¢˜ï¼ŒCARTä½¿ç”¨æ–¹å·®ä½œä¸ºåˆ†è£‚å‡†åˆ™ï¼š
```
Variance(D) = (1/n) * Î£(yi - È³)Â²
```
å…¶ä¸­yiæ˜¯ç›®æ ‡å€¼ï¼ŒÈ³æ˜¯ç›®æ ‡å€¼çš„å‡å€¼ã€‚ 